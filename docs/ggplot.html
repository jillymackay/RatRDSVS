<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 ggplot2 | R @ R(D)SVS</title>
  <meta name="description" content="This book will help you get started in R. It’s designed for students (and staff) at R(D)SVS, and is free to use and adapt." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 ggplot2 | R @ R(D)SVS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will help you get started in R. It’s designed for students (and staff) at R(D)SVS, and is free to use and adapt." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 ggplot2 | R @ R(D)SVS" />
  
  <meta name="twitter:description" content="This book will help you get started in R. It’s designed for students (and staff) at R(D)SVS, and is free to use and adapt." />
  

<meta name="author" content="Jill R D MacKay" />


<meta name="date" content="2021-01-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="charts.html"/>
<link rel="next" href="dataprocessing.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>R @ R(D)SVS</a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About this book</a><ul>
<li class="chapter" data-level="0.1" data-path="about.html"><a href="about.html#howuse"><i class="fa fa-check"></i><b>0.1</b> How to use this book</a><ul>
<li class="chapter" data-level="0.1.1" data-path="about.html"><a href="about.html#useinclass"><i class="fa fa-check"></i><b>0.1.1</b> As a student in class</a></li>
<li class="chapter" data-level="0.1.2" data-path="about.html"><a href="about.html#useindependent"><i class="fa fa-check"></i><b>0.1.2</b> As a student learning independently</a></li>
<li class="chapter" data-level="0.1.3" data-path="about.html"><a href="about.html#useteach"><i class="fa fa-check"></i><b>0.1.3</b> As a teacher</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="about.html"><a href="about.html#usetips"><i class="fa fa-check"></i><b>0.2</b> Tips for using an online textbook</a></li>
<li class="chapter" data-level="0.3" data-path="about.html"><a href="about.html#license"><i class="fa fa-check"></i><b>0.3</b> Licensing</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installing R</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#install_r"><i class="fa fa-check"></i><b>1.1</b> Install R</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#install_rs"><i class="fa fa-check"></i><b>1.2</b> Install R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="install.html"><a href="install.html#navigate_rs"><i class="fa fa-check"></i><b>1.2.1</b> Quick R Studio Navigation Guide</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#install_rsc"><i class="fa fa-check"></i><b>1.3</b> Using the Cloud</a></li>
<li class="chapter" data-level="1.4" data-path="install.html"><a href="install.html#install_vids"><i class="fa fa-check"></i><b>1.4</b> Install R and R Studio - Video Instruction</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="start.html"><a href="start.html#thesecret"><i class="fa fa-check"></i><b>2.1</b> The Big Secret</a><ul>
<li class="chapter" data-level="2.1.1" data-path="start.html"><a href="start.html#ex_tidytuesday"><i class="fa fa-check"></i><b>2.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="start.html"><a href="start.html#projects"><i class="fa fa-check"></i><b>2.2</b> Projects</a></li>
<li class="chapter" data-level="2.3" data-path="start.html"><a href="start.html#environment"><i class="fa fa-check"></i><b>2.3</b> Environment</a><ul>
<li class="chapter" data-level="2.3.1" data-path="start.html"><a href="start.html#ex_env"><i class="fa fa-check"></i><b>2.3.1</b> Exercise - Environment</a></li>
<li class="chapter" data-level="2.3.2" data-path="start.html"><a href="start.html#ex_func"><i class="fa fa-check"></i><b>2.3.2</b> Exercise - Functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="start.html"><a href="start.html#packages"><i class="fa fa-check"></i><b>2.4</b> Packages</a><ul>
<li class="chapter" data-level="2.4.1" data-path="start.html"><a href="start.html#ex_packages"><i class="fa fa-check"></i><b>2.4.1</b> Exercise - Install and Load a Package</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="start.html"><a href="start.html#scripts_rmd"><i class="fa fa-check"></i><b>2.5</b> R Markdown vs R Scripts</a><ul>
<li class="chapter" data-level="2.5.1" data-path="start.html"><a href="start.html#r-scripts"><i class="fa fa-check"></i><b>2.5.1</b> R Scripts</a></li>
<li class="chapter" data-level="2.5.2" data-path="start.html"><a href="start.html#r-markdown"><i class="fa fa-check"></i><b>2.5.2</b> R Markdown</a></li>
<li class="chapter" data-level="2.5.3" data-path="start.html"><a href="start.html#video_rmd"><i class="fa fa-check"></i><b>2.5.3</b> A video on R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="start.html"><a href="start.html#video_env"><i class="fa fa-check"></i><b>2.6</b> Video Introductions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a><ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#packages-for-this-chapter"><i class="fa fa-check"></i><b>3.1</b> Packages for this chapter</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#data_builtin"><i class="fa fa-check"></i><b>3.2</b> Built In Data</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#ex_inbuiltdata"><i class="fa fa-check"></i><b>3.3</b> Exercise</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#created_data"><i class="fa fa-check"></i><b>3.4</b> Data you create</a></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#ex_createdata"><i class="fa fa-check"></i><b>3.5</b> Exercise - Creating data</a></li>
<li class="chapter" data-level="3.6" data-path="data.html"><a href="data.html#data_load"><i class="fa fa-check"></i><b>3.6</b> Loading data from your hard drive</a></li>
<li class="chapter" data-level="3.7" data-path="data.html"><a href="data.html#ex_data_load"><i class="fa fa-check"></i><b>3.7</b> Loading data</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data.html"><a href="data.html#loading-from-a-csv"><i class="fa fa-check"></i><b>3.7.1</b> Loading from a CSV</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data.html"><a href="data.html#ex_loadcsv"><i class="fa fa-check"></i><b>3.8</b> Exercise</a><ul>
<li class="chapter" data-level="3.8.1" data-path="data.html"><a href="data.html#loading-from-an-excel-file"><i class="fa fa-check"></i><b>3.8.1</b> Loading from an Excel file</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="data.html"><a href="data.html#ex_loadexcel"><i class="fa fa-check"></i><b>3.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>4</b> Charts</a><ul>
<li class="chapter" data-level="4.1" data-path="charts.html"><a href="charts.html#datavis"><i class="fa fa-check"></i><b>4.1</b> Data Visualisation</a><ul>
<li class="chapter" data-level="4.1.1" data-path="charts.html"><a href="charts.html#vis_bad"><i class="fa fa-check"></i><b>4.1.1</b> When charts go bad</a></li>
<li class="chapter" data-level="4.1.2" data-path="charts.html"><a href="charts.html#vis_anatomy"><i class="fa fa-check"></i><b>4.1.2</b> Chart anatomy</a></li>
<li class="chapter" data-level="4.1.3" data-path="charts.html"><a href="charts.html#vis_bar"><i class="fa fa-check"></i><b>4.1.3</b> Bar charts</a></li>
<li class="chapter" data-level="4.1.4" data-path="charts.html"><a href="charts.html#vis_hist"><i class="fa fa-check"></i><b>4.1.4</b> Histograms</a></li>
<li class="chapter" data-level="4.1.5" data-path="charts.html"><a href="charts.html#vis_scatter"><i class="fa fa-check"></i><b>4.1.5</b> Scatterplots</a></li>
<li class="chapter" data-level="4.1.6" data-path="charts.html"><a href="charts.html#vis_box"><i class="fa fa-check"></i><b>4.1.6</b> Boxplots</a></li>
<li class="chapter" data-level="4.1.7" data-path="charts.html"><a href="charts.html#vis_infographic"><i class="fa fa-check"></i><b>4.1.7</b> Infographics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>5</b> ggplot2</a><ul>
<li class="chapter" data-level="5.1" data-path="ggplot.html"><a href="ggplot.html#why-ggplot"><i class="fa fa-check"></i><b>5.1</b> Why ggplot?</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot.html"><a href="ggplot.html#gg_build"><i class="fa fa-check"></i><b>5.2</b> Building a ggplot object (a scatterplot)</a><ul>
<li class="chapter" data-level="5.2.1" data-path="ggplot.html"><a href="ggplot.html#gg_axis"><i class="fa fa-check"></i><b>5.2.1</b> Changing an axis in ggplot2</a></li>
<li class="chapter" data-level="5.2.2" data-path="ggplot.html"><a href="ggplot.html#gg_theme"><i class="fa fa-check"></i><b>5.2.2</b> Changing themes</a></li>
<li class="chapter" data-level="5.2.3" data-path="ggplot.html"><a href="ggplot.html#gg_labs"><i class="fa fa-check"></i><b>5.2.3</b> Changing labels and titles</a></li>
<li class="chapter" data-level="5.2.4" data-path="ggplot.html"><a href="ggplot.html#gg_smooth"><i class="fa fa-check"></i><b>5.2.4</b> Adding regression lines to ggplot</a></li>
<li class="chapter" data-level="5.2.5" data-path="ggplot.html"><a href="ggplot.html#gg_groups"><i class="fa fa-check"></i><b>5.2.5</b> Adding groups to ggplot</a></li>
<li class="chapter" data-level="5.2.6" data-path="ggplot.html"><a href="ggplot.html#gg_legend"><i class="fa fa-check"></i><b>5.2.6</b> Changing legends</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="ggplot.html"><a href="ggplot.html#gg_boxplot"><i class="fa fa-check"></i><b>5.3</b> Building a boxplot</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot.html"><a href="ggplot.html#gg_facets"><i class="fa fa-check"></i><b>5.4</b> Facets</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot.html"><a href="ggplot.html#gg_bars"><i class="fa fa-check"></i><b>5.5</b> Bar charts</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot.html"><a href="ggplot.html#ex_ggplot"><i class="fa fa-check"></i><b>5.6</b> Exercise</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot.html"><a href="ggplot.html#gg_vids"><i class="fa fa-check"></i><b>5.7</b> Videos</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot.html"><a href="ggplot.html#gg_resources"><i class="fa fa-check"></i><b>5.8</b> Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dataprocessing.html"><a href="dataprocessing.html"><i class="fa fa-check"></i><b>6</b> Data Processing</a><ul>
<li class="chapter" data-level="6.1" data-path="dataprocessing.html"><a href="dataprocessing.html#workflows"><i class="fa fa-check"></i><b>6.1</b> Workflows</a><ul>
<li class="chapter" data-level="6.1.1" data-path="dataprocessing.html"><a href="dataprocessing.html#an-example-of-sharing-code"><i class="fa fa-check"></i><b>6.1.1</b> An example of sharing code</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="dataprocessing.html"><a href="dataprocessing.html#openrmd"><i class="fa fa-check"></i><b>6.2</b> Opening R Markdown Docs</a></li>
<li class="chapter" data-level="6.3" data-path="dataprocessing.html"><a href="dataprocessing.html#codermd"><i class="fa fa-check"></i><b>6.3</b> Running Code</a></li>
<li class="chapter" data-level="6.4" data-path="dataprocessing.html"><a href="dataprocessing.html#editrmd"><i class="fa fa-check"></i><b>6.4</b> Editing R Markdown Docs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>7</b> The Tidyverse</a><ul>
<li class="chapter" data-level="7.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy_opinions"><i class="fa fa-check"></i><b>7.1</b> Opinionated Packages</a></li>
<li class="chapter" data-level="7.2" data-path="tidyverse.html"><a href="tidyverse.html#data-for-this-chapter"><i class="fa fa-check"></i><b>7.2</b> Data for this chapter</a></li>
<li class="chapter" data-level="7.3" data-path="tidyverse.html"><a href="tidyverse.html#mutate"><i class="fa fa-check"></i><b>7.3</b> Mutating data</a><ul>
<li class="chapter" data-level="7.3.1" data-path="tidyverse.html"><a href="tidyverse.html#mutate-to-change-a-variable-type."><i class="fa fa-check"></i><b>7.3.1</b> Mutate to change a variable type.</a></li>
<li class="chapter" data-level="7.3.2" data-path="tidyverse.html"><a href="tidyverse.html#mutate-to-change-the-contents-of-data"><i class="fa fa-check"></i><b>7.3.2</b> Mutate to change the contents of data</a></li>
<li class="chapter" data-level="7.3.3" data-path="tidyverse.html"><a href="tidyverse.html#mutate-to-change-multiple-variables"><i class="fa fa-check"></i><b>7.3.3</b> Mutate to change multiple variables</a></li>
<li class="chapter" data-level="7.3.4" data-path="tidyverse.html"><a href="tidyverse.html#tidy_summ"><i class="fa fa-check"></i><b>7.3.4</b> Summarise as a unique form of mutate</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidyverse.html"><a href="tidyverse.html#pivoting_data"><i class="fa fa-check"></i><b>7.4</b> Wide and tall data</a><ul>
<li class="chapter" data-level="7.4.1" data-path="tidyverse.html"><a href="tidyverse.html#processing-data"><i class="fa fa-check"></i><b>7.4.1</b> Processing data</a></li>
<li class="chapter" data-level="7.4.2" data-path="tidyverse.html"><a href="tidyverse.html#pivot_longer"><i class="fa fa-check"></i><b>7.4.2</b> pivot_longer</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tidyverse.html"><a href="tidyverse.html#pivot_wider"><i class="fa fa-check"></i><b>7.5</b> pivot_wider</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="trouble.html"><a href="trouble.html"><i class="fa fa-check"></i><b>8</b> Troubleshooting</a><ul>
<li class="chapter" data-level="8.1" data-path="trouble.html"><a href="trouble.html#working-independently"><i class="fa fa-check"></i><b>8.1</b> Working independently</a></li>
<li class="chapter" data-level="8.2" data-path="trouble.html"><a href="trouble.html#trouble_warnings"><i class="fa fa-check"></i><b>8.2</b> Common warnings</a></li>
<li class="chapter" data-level="8.3" data-path="trouble.html"><a href="trouble.html#trouble_errors"><i class="fa fa-check"></i><b>8.3</b> Common errors</a><ul>
<li class="chapter" data-level="8.3.1" data-path="trouble.html"><a href="trouble.html#object-not-found."><i class="fa fa-check"></i><b>8.3.1</b> Object not found.</a></li>
<li class="chapter" data-level="8.3.2" data-path="trouble.html"><a href="trouble.html#function-not-found"><i class="fa fa-check"></i><b>8.3.2</b> Function not found</a></li>
<li class="chapter" data-level="8.3.3" data-path="trouble.html"><a href="trouble.html#unexpected-symbols"><i class="fa fa-check"></i><b>8.3.3</b> Unexpected symbols</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="trouble.html"><a href="trouble.html#quick-warnings-and-errors"><i class="fa fa-check"></i><b>8.4</b> Quick warnings and errors</a></li>
<li class="chapter" data-level="8.5" data-path="trouble.html"><a href="trouble.html#searching-for-help"><i class="fa fa-check"></i><b>8.5</b> Searching for help</a><ul>
<li class="chapter" data-level="8.5.1" data-path="trouble.html"><a href="trouble.html#trouble_help"><i class="fa fa-check"></i><b>8.5.1</b> Tips for asking for help</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="trouble.html"><a href="trouble.html#trouble_reprex"><i class="fa fa-check"></i><b>8.6</b> Reproducible Examples (reprex)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statsbasic.html"><a href="statsbasic.html"><i class="fa fa-check"></i><b>9</b> Basic Statistics</a><ul>
<li class="chapter" data-level="9.1" data-path="statsbasic.html"><a href="statsbasic.html#descstats"><i class="fa fa-check"></i><b>9.1</b> Descriptive stats</a><ul>
<li class="chapter" data-level="9.1.1" data-path="statsbasic.html"><a href="statsbasic.html#mathematical-notation"><i class="fa fa-check"></i><b>9.1.1</b> Mathematical notation</a></li>
<li class="chapter" data-level="9.1.2" data-path="statsbasic.html"><a href="statsbasic.html#stats_mean"><i class="fa fa-check"></i><b>9.1.2</b> The mean</a></li>
<li class="chapter" data-level="9.1.3" data-path="statsbasic.html"><a href="statsbasic.html#the-mean-as-a-model"><i class="fa fa-check"></i><b>9.1.3</b> The mean as a model</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="statsbasic.html"><a href="statsbasic.html#stats_median"><i class="fa fa-check"></i><b>9.2</b> Median</a></li>
<li class="chapter" data-level="9.3" data-path="statsbasic.html"><a href="statsbasic.html#stats_mode"><i class="fa fa-check"></i><b>9.3</b> Mode</a></li>
<li class="chapter" data-level="9.4" data-path="statsbasic.html"><a href="statsbasic.html#stats_which"><i class="fa fa-check"></i><b>9.4</b> Which model?</a></li>
<li class="chapter" data-level="9.5" data-path="statsbasic.html"><a href="statsbasic.html#stats_variation"><i class="fa fa-check"></i><b>9.5</b> Measures of variation</a><ul>
<li class="chapter" data-level="9.5.1" data-path="statsbasic.html"><a href="statsbasic.html#stats_variance"><i class="fa fa-check"></i><b>9.5.1</b> Variance</a></li>
<li class="chapter" data-level="9.5.2" data-path="statsbasic.html"><a href="statsbasic.html#stats_sd"><i class="fa fa-check"></i><b>9.5.2</b> Standard Deviation</a></li>
<li class="chapter" data-level="9.5.3" data-path="statsbasic.html"><a href="statsbasic.html#stats_se"><i class="fa fa-check"></i><b>9.5.3</b> Standard Error</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="statsbasic.html"><a href="statsbasic.html#calculating-descriptive-stats"><i class="fa fa-check"></i><b>9.6</b> Calculating descriptive stats</a></li>
<li class="chapter" data-level="9.7" data-path="statsbasic.html"><a href="statsbasic.html#reporting-on-heifer-weight"><i class="fa fa-check"></i><b>9.7</b> Reporting on heifer weight</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="statsfreq.html"><a href="statsfreq.html"><i class="fa fa-check"></i><b>10</b> Predicting more things</a><ul>
<li class="chapter" data-level="10.1" data-path="statsfreq.html"><a href="statsfreq.html#ex_anovatheory"><i class="fa fa-check"></i><b>10.1</b> Partitioning Variation</a><ul>
<li class="chapter" data-level="10.1.1" data-path="statsfreq.html"><a href="statsfreq.html#perfect-worlds-vs-reality"><i class="fa fa-check"></i><b>10.1.1</b> Perfect Worlds vs Reality</a></li>
<li class="chapter" data-level="10.1.2" data-path="statsfreq.html"><a href="statsfreq.html#a-fake-experiment"><i class="fa fa-check"></i><b>10.1.2</b> A Fake Experiment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="choosestats.html"><a href="choosestats.html"><i class="fa fa-check"></i><b>11</b> How to choose your stats</a><ul>
<li class="chapter" data-level="11.1" data-path="choosestats.html"><a href="choosestats.html#cs_start"><i class="fa fa-check"></i><b>11.1</b> Where to start</a></li>
<li class="chapter" data-level="11.2" data-path="choosestats.html"><a href="choosestats.html#cs_rcat"><i class="fa fa-check"></i><b>11.2</b> My response is a categorical variable</a><ul>
<li class="chapter" data-level="11.2.1" data-path="choosestats.html"><a href="choosestats.html#cs_rcat_hist"><i class="fa fa-check"></i><b>11.2.1</b> Categorical Response, Historical/Known Comparisons</a></li>
<li class="chapter" data-level="11.2.2" data-path="choosestats.html"><a href="choosestats.html#cs_rcat_ecat"><i class="fa fa-check"></i><b>11.2.2</b> Categorical Response, Categorical Explanatory</a></li>
<li class="chapter" data-level="11.2.3" data-path="choosestats.html"><a href="choosestats.html#cs_rcat_enum"><i class="fa fa-check"></i><b>11.2.3</b> Categorical Response, Numerical Explanatory (Logistic Regression)</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="choosestats.html"><a href="choosestats.html#cs_rnum"><i class="fa fa-check"></i><b>11.3</b> My response is a numerical variable</a><ul>
<li class="chapter" data-level="11.3.1" data-path="choosestats.html"><a href="choosestats.html#cs_rnum_hist"><i class="fa fa-check"></i><b>11.3.1</b> Numerical Response, Historical/Known Comparisons (One Sample t-Test)</a></li>
<li class="chapter" data-level="11.3.2" data-path="choosestats.html"><a href="choosestats.html#cs_rnum_ecat_r"><i class="fa fa-check"></i><b>11.3.2</b> Numerical Response (Repeated Measures), Categorical Explanatory (Paired t-Test)</a></li>
<li class="chapter" data-level="11.3.3" data-path="choosestats.html"><a href="choosestats.html#cs_rnum_ecat"><i class="fa fa-check"></i><b>11.3.3</b> Numerical Response, Categorical Explanatory (ANOVA/GLM)</a></li>
<li class="chapter" data-level="11.3.4" data-path="choosestats.html"><a href="choosestats.html#cs_rnum_enum"><i class="fa fa-check"></i><b>11.3.4</b> Numerical Response, Numerical Explanatory (Correlation &amp; Regression)</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="choosestats.html"><a href="choosestats.html#my-response-is-an-ordinal-variable-cs_rord"><i class="fa fa-check"></i><b>11.4</b> My response is an ordinal variable {cs_rord}</a><ul>
<li class="chapter" data-level="11.4.1" data-path="choosestats.html"><a href="choosestats.html#cs_rord_hist"><i class="fa fa-check"></i><b>11.4.1</b> Ordinal Response, Historical/Known Comparisons (One Sample Wilcoxan Test)</a></li>
<li class="chapter" data-level="11.4.2" data-path="choosestats.html"><a href="choosestats.html#cs_rord_ecat_r"><i class="fa fa-check"></i><b>11.4.2</b> Ordinal Response (Repeated Measures), Categorical Explanatory (One Sample Wilcoxan Signed-Rank Test)</a></li>
<li class="chapter" data-level="11.4.3" data-path="choosestats.html"><a href="choosestats.html#cs_rord_ecat"><i class="fa fa-check"></i><b>11.4.3</b> Ordinal Response, Categorical Explanatory</a></li>
<li class="chapter" data-level="11.4.4" data-path="choosestats.html"><a href="choosestats.html#cs_rord_rnum"><i class="fa fa-check"></i><b>11.4.4</b> Ordinal Response, Numerical Explanatory (Spearman rank correlation)</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="choosestats.html"><a href="choosestats.html#cs_glms"><i class="fa fa-check"></i><b>11.5</b> I got all of them (generalised linear model)</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="whatnext.html"><a href="whatnext.html"><i class="fa fa-check"></i><b>12</b> What next</a><ul>
<li class="chapter" data-level="12.1" data-path="whatnext.html"><a href="whatnext.html#github"><i class="fa fa-check"></i><b>12.1</b> github</a></li>
<li class="chapter" data-level="12.2" data-path="whatnext.html"><a href="whatnext.html#experiment-and-build"><i class="fa fa-check"></i><b>12.2</b> Experiment and build</a></li>
<li class="chapter" data-level="12.3" data-path="whatnext.html"><a href="whatnext.html#the-r-community"><i class="fa fa-check"></i><b>12.3</b> The R Community</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="whyr.html"><a href="whyr.html"><i class="fa fa-check"></i><b>13</b> Why use R</a><ul>
<li class="chapter" data-level="13.1" data-path="whyr.html"><a href="whyr.html#why-does-open-source-matter"><i class="fa fa-check"></i><b>13.1</b> Why does open source matter?</a></li>
<li class="chapter" data-level="13.2" data-path="whyr.html"><a href="whyr.html#so-why-r"><i class="fa fa-check"></i><b>13.2</b> So why R?</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>14</b> Answers</a><ul>
<li class="chapter" data-level="14.1" data-path="answers.html"><a href="answers.html#ans_createdata"><i class="fa fa-check"></i><b>14.1</b> Creating Data Answers</a><ul>
<li class="chapter" data-level="14.1.1" data-path="answers.html"><a href="answers.html#changing-mpg-data"><i class="fa fa-check"></i><b>14.1.1</b> Changing mpg data</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="answers.html"><a href="answers.html#ans_loadcsv"><i class="fa fa-check"></i><b>14.2</b> Loading csv data answers</a></li>
<li class="chapter" data-level="14.3" data-path="answers.html"><a href="answers.html#ans_loadexcel"><i class="fa fa-check"></i><b>14.3</b> Loading excel data answers</a></li>
<li class="chapter" data-level="14.4" data-path="answers.html"><a href="answers.html#ans_ggbox"><i class="fa fa-check"></i><b>14.4</b> ggplot answers</a><ul>
<li class="chapter" data-level="14.4.1" data-path="answers.html"><a href="answers.html#boxplot-of-highway-miles-per-gallon-versus-class-mpg-dataset"><i class="fa fa-check"></i><b>14.4.1</b> Boxplot of highway miles per gallon versus class (mpg dataset)</a></li>
<li class="chapter" data-level="14.4.2" data-path="answers.html"><a href="answers.html#ans_gghist"><i class="fa fa-check"></i><b>14.4.2</b> Histogram of city miles per gallon faceted by transmission type (mpg dataset)</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="answers.html"><a href="answers.html#stats_proofvariance"><i class="fa fa-check"></i><b>14.5</b> Proof of variance</a></li>
<li class="chapter" data-level="14.6" data-path="answers.html"><a href="answers.html#ans_tidyunicorns"><i class="fa fa-check"></i><b>14.6</b> Tidy Unicorns</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="acks.html"><a href="acks.html"><i class="fa fa-check"></i><b>15</b> Acknowledgements</a><ul>
<li class="chapter" data-level="15.1" data-path="acks.html"><a href="acks.html#image-sources"><i class="fa fa-check"></i><b>15.1</b> Image Sources</a></li>
<li class="chapter" data-level="15.2" data-path="acks.html"><a href="acks.html#specific-acknowledgements"><i class="fa fa-check"></i><b>15.2</b> Specific Acknowledgements</a></li>
<li class="chapter" data-level="15.3" data-path="acks.html"><a href="acks.html#beta-testers-and-helpers"><i class="fa fa-check"></i><b>15.3</b> Beta Testers and Helpers</a></li>
<li class="chapter" data-level="15.4" data-path="acks.html"><a href="acks.html#the-biggest-thanks"><i class="fa fa-check"></i><b>15.4</b> The biggest thanks</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R @ R(D)SVS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> ggplot2</h1>
<div class="los">
<p>
You can skip this chapter if: * You are confident using the <code>ggplot2</code> package
</p>
<ul>
<li>
<p>
You can use the <code>geom_bar</code>, <code>geom_point</code> and <code>geom_histogram</code> arguments
</p>
</li>
<li>
<p>
You can customise a ggplot2 object
</p>
</li>
</ul>
</div>
<div id="why-ggplot" class="section level2">
<h2><span class="header-section-number">5.1</span> Why ggplot?</h2>
<p>There is a fierce debate in the land of R. Some people think basic R shoud be taught first. Others think that you should learn how to do more complicated things first.</p>
<p>I think you should start to learn ggplot2.</p>
<p>ggplot2 is a really great way to learn R, and particularly the <code>tidyverse</code> approach to coding. It also makes beautiful charts. All my charts in the last chapter (even the dreaded pie chart) were made in ggplot2.</p>
</div>
<div id="gg_build" class="section level2">
<h2><span class="header-section-number">5.2</span> Building a ggplot object (a scatterplot)</h2>
<p>First - open an R Script or RMD file and load the <code>tidyverse</code> package:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="ggplot.html#cb52-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Let’s choose the <code>diamonds</code> dataset (from <code>ggplot2</code> - you can check this by running <code>?diamonds</code>), and take a look.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="ggplot.html#cb53-1"></a><span class="kw">head</span>(diamonds)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 10
##   carat cut       color clarity depth table price     x     y     z
##   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
## 2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
## 3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
## 4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
## 5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
## 6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48</code></pre>
<div class="hey">
<p>
The <code>diamonds</code> dataset is really big and has lots of variables. This makes it good for learning ggplot2 because you can continue using the same example dataset even when we need lots of variables.
</p>
<p>
However, sometimes your PC might be a bit slow in rendering some of these charts. Be patient with it - especially when you see the red ‘stop’ sign in the top right of the console window.
</p>
</div>
<div class="translate">
<p>
We want to take the <code>diamonds</code> dataset and then (<code>%&gt;%</code>) send it to <code>ggplot</code>. In <code>ggplot</code> we will use the <strong>aesthetics</strong> argument (<code>aes</code>) to tell R what to put on the <code>x</code> axis and the <code>y</code> axis.
</p>
</div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="ggplot.html#cb55-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-2"><a href="ggplot.html#cb55-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</span></code></pre></div>
<p>What do you think this code will do?</p>
<p><strong>Try this code first!</strong></p>
<p>This code ends up giving us a blank chart. This seems strange until you figure out that ggplot works by <strong>layering</strong> elements of a chart on top of one another:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="ggplot.html#cb56-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-2"><a href="ggplot.html#cb56-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-115"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-115-1.png" alt="A ggplot object with no geom layers" width="672" />
<p class="caption">
Figure: 5.1: A ggplot object with no geom layers
</p>
</div>
<p>We need to tell R to add a <code>geom</code> layer, and we do that by adding a <code>+</code><a href="acks.html#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> symbol. In this case, we want to add a <code>geom_point</code> layer, so we write the following:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="ggplot.html#cb57-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb57-2"><a href="ggplot.html#cb57-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb57-3"><a href="ggplot.html#cb57-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-116"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-116-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat" width="672" />
<p class="caption">
Figure: 5.2: A ggplot object with a geom_point layer, the price of diamonds by their carat
</p>
</div>
<p>Look at how quickly and easily that worked. With three lines of code, you created a chart of 50,000 datapoints.</p>
<p>That must make you wonder what else you can do . . .</p>
<div id="gg_axis" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Changing an axis in ggplot2</h3>
<p>Let’s change the x axis on this chart. At the moment, we have a ‘tick’ mark at every carat, but what if we want to have a ‘tick’ mark at every 0.5 carats?</p>
<p>All we need is another line of code.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="ggplot.html#cb58-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb58-2"><a href="ggplot.html#cb58-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb58-3"><a href="ggplot.html#cb58-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb58-4"><a href="ggplot.html#cb58-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">5</span>, <span class="fl">0.5</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-117"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-117-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed" width="672" />
<p class="caption">
Figure: 5.3: A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed
</p>
</div>
<p>The <code>scale_x_continuous</code> line reads:</p>
<div class="translate">
<p>
Take the last three lines of code and then (<code>+</code>) * Change the scale of the x axis (<code>scale_x_</code>) which is a continuous (<code>scale_x_continuous</code>) variable.
</p>
<ul>
<li>
<p>
Change the numbers along the axis (<code>breaks =</code>) to a sequence (<code>seq</code>)
</p>
</li>
<li>
<p>
The sequence starts at <code>0</code>, goes to <code>5</code>, and the spaces between them should be <code>0.5</code>
</p>
</li>
</ul>
</div>
<p>We can go further by changing the limits within the<code>scale_x_</code> command …</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="ggplot.html#cb59-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb59-2"><a href="ggplot.html#cb59-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb59-3"><a href="ggplot.html#cb59-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb59-4"><a href="ggplot.html#cb59-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">5</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-119"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-119-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed" width="672" />
<p class="caption">
Figure: 5.4: A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed
</p>
</div>
<p>Now we’ve told R:</p>
<div class="translate">
<ul>
<li>
<p>
Change the scale of x
</p>
</li>
<li>
<p>
Set new limits on x (<code>limits =</code>)
</p>
</li>
<li>
<p>
The limits are a vector of two numbers together (<code>c()</code>)
</p>
</li>
<li>
<p>
Start at <code>0</code> and end at <code>6</code>
</p>
</li>
</ul>
</div>
<p>However, you’ll notice that the numbers don’t go all the way to the end. Have you spotted our mistake?</p>
<p>We need to change the <code>seq</code> command earlier in the argument…</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="ggplot.html#cb60-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb60-2"><a href="ggplot.html#cb60-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb60-3"><a href="ggplot.html#cb60-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb60-4"><a href="ggplot.html#cb60-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-121"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-121-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed" width="672" />
<p class="caption">
Figure: 5.5: A ggplot object with a geom_point layer, the price of diamonds by their carat, x axis changed
</p>
</div>
<p>And we can change the y axis in much the same way:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="ggplot.html#cb61-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb61-2"><a href="ggplot.html#cb61-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb61-3"><a href="ggplot.html#cb61-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb61-4"><a href="ggplot.html#cb61-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">5</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span></span>
<span id="cb61-5"><a href="ggplot.html#cb61-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-122"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-122-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, x and y axes changed" width="672" />
<p class="caption">
Figure: 5.6: A ggplot object with a geom_point layer, the price of diamonds by their carat, x and y axes changed
</p>
</div>
</div>
<div id="gg_theme" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Changing themes</h3>
<p>Themes are a very cool way to quickly change the look of and customise your charts. Just like everything else in ggplot, we just want to add another layer of code.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="ggplot.html#cb62-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb62-2"><a href="ggplot.html#cb62-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb62-3"><a href="ggplot.html#cb62-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb62-4"><a href="ggplot.html#cb62-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb62-5"><a href="ggplot.html#cb62-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb62-6"><a href="ggplot.html#cb62-6"></a><span class="st">  </span><span class="kw">theme_bw</span>() </span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-123"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-123-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, black &amp; white theme" width="672" />
<p class="caption">
Figure: 5.7: A ggplot object with a geom_point layer, the price of diamonds by their carat, black &amp; white theme
</p>
</div>
<p>There are lots of different themes in ggplot. If you run that code again you can change <code>theme_bw()</code> to any of the following:</p>
<ul>
<li><p><code>theme_classic()</code></p></li>
<li><p><code>theme_grey()</code></p></li>
<li><p><code>theme_light()</code></p></li>
<li><p><code>theme_linedraw()</code></p></li>
<li><p><code>theme_minimal()</code></p></li>
<li><p><code>theme_void()</code></p></li>
</ul>
<p>Which one do you prefer?</p>
<p>Personally, I like this option:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="ggplot.html#cb63-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb63-2"><a href="ggplot.html#cb63-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb63-3"><a href="ggplot.html#cb63-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb63-4"><a href="ggplot.html#cb63-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb63-5"><a href="ggplot.html#cb63-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb63-6"><a href="ggplot.html#cb63-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() </span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-124"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-124-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, classic theme" width="672" />
<p class="caption">
Figure: 5.8: A ggplot object with a geom_point layer, the price of diamonds by their carat, classic theme
</p>
</div>
</div>
<div id="gg_labs" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Changing labels and titles</h3>
<p>Now we’ve changed axes, plot area, and gridlines, why don’t we give this beautiful plot some labels?</p>
<div class="hey">
<p>
If you were to take a wild guess at how to change labels - what would you add to the plot? Remember, taking the time to stop and try these exercises will help you learn R. And remember that R Studio will autocomplete things you type - what happens if you start to type ‘labels’?
</p>
</div>
<p>We can adjust labels with the following extra line of code.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ggplot.html#cb64-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb64-2"><a href="ggplot.html#cb64-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb64-3"><a href="ggplot.html#cb64-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb64-4"><a href="ggplot.html#cb64-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb64-5"><a href="ggplot.html#cb64-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb64-6"><a href="ggplot.html#cb64-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb64-7"><a href="ggplot.html#cb64-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-126"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-126-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels" width="672" />
<p class="caption">
Figure: 5.9: A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels
</p>
</div>
<p>Unsurprisingly, if we want to change the y axis label, we just need to add another argument inside the <code>labs()</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="ggplot.html#cb65-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb65-2"><a href="ggplot.html#cb65-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb65-3"><a href="ggplot.html#cb65-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb65-4"><a href="ggplot.html#cb65-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb65-5"><a href="ggplot.html#cb65-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb65-6"><a href="ggplot.html#cb65-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb65-7"><a href="ggplot.html#cb65-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb65-8"><a href="ggplot.html#cb65-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-127"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-127-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels" width="672" />
<p class="caption">
Figure: 5.10: A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels
</p>
</div>
<p>You can even add in titles and subtitles.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="ggplot.html#cb66-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb66-2"><a href="ggplot.html#cb66-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb66-3"><a href="ggplot.html#cb66-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb66-4"><a href="ggplot.html#cb66-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb66-5"><a href="ggplot.html#cb66-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb66-6"><a href="ggplot.html#cb66-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb66-7"><a href="ggplot.html#cb66-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb66-8"><a href="ggplot.html#cb66-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>,</span>
<span id="cb66-9"><a href="ggplot.html#cb66-9"></a>        <span class="dt">title =</span> <span class="st">&quot;Price of &gt;50,000 round-cut diamonds&quot;</span>,</span>
<span id="cb66-10"><a href="ggplot.html#cb66-10"></a>        <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2 package&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-128"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-128-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels" width="672" />
<p class="caption">
Figure: 5.11: A ggplot object with a geom_point layer, the price of diamonds by their carat, adjusted labels
</p>
</div>
</div>
<div id="gg_smooth" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Adding regression lines to ggplot</h3>
<p>It seems as though the bigger the diamond is, the more you pay for it, so why don’t we add a line of best fit to demonstrate this?</p>
<p>This is so easy to do in R.</p>
<p>We add:</p>
<div class="translate">
<p>
We add to the graph a smooth line geom (<code>stat_smooth</code>) We have a number of options here: * We want the line to be calculated using a linear model (<code>method = “lm”</code>)
</p>
<ul>
<li>
We don’t want to see any standard error bars around the line (<code>se = FALSE</code>)
</li>
</ul>
</div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ggplot.html#cb67-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb67-2"><a href="ggplot.html#cb67-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb67-3"><a href="ggplot.html#cb67-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb67-4"><a href="ggplot.html#cb67-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb67-5"><a href="ggplot.html#cb67-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb67-6"><a href="ggplot.html#cb67-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb67-7"><a href="ggplot.html#cb67-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb67-8"><a href="ggplot.html#cb67-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>,</span>
<span id="cb67-9"><a href="ggplot.html#cb67-9"></a>        <span class="dt">title =</span> <span class="st">&quot;Price of &gt;50,000 round-cut diamonds&quot;</span>,</span>
<span id="cb67-10"><a href="ggplot.html#cb67-10"></a>        <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2 package&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb67-11"><a href="ggplot.html#cb67-11"></a><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-130"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-130-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat, regression line added" width="672" />
<p class="caption">
Figure: 5.12: A ggplot object with a geom_point layer, the price of diamonds by their carat, regression line added
</p>
</div>
</div>
<div id="gg_groups" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Adding groups to ggplot</h3>
<p>Looking at our plot, it seems clear that the diamonds seem to stagger a bit, with lots of diamonds at 1, 1.5, 2, 3, and 3.5 carats, and fewer diamonds in the middle of a carat range. There may be something else in the data that helps to explain this . . .</p>
<p>In ggplot, we can easily add a grouping variable to a scatterplot.</p>
<p>All we need to do, is give it a new aesthetic (<code>aes</code>) argument: <code>colour = cut</code>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="ggplot.html#cb68-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb68-2"><a href="ggplot.html#cb68-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">colour =</span> cut)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb68-3"><a href="ggplot.html#cb68-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb68-4"><a href="ggplot.html#cb68-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb68-5"><a href="ggplot.html#cb68-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb68-6"><a href="ggplot.html#cb68-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb68-7"><a href="ggplot.html#cb68-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb68-8"><a href="ggplot.html#cb68-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>,</span>
<span id="cb68-9"><a href="ggplot.html#cb68-9"></a>        <span class="dt">title =</span> <span class="st">&quot;Price of &gt;50,000 round-cut diamonds&quot;</span>,</span>
<span id="cb68-10"><a href="ggplot.html#cb68-10"></a>        <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2 package&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb68-11"><a href="ggplot.html#cb68-11"></a><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-131"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-131-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added" width="672" />
<p class="caption">
Figure: 5.13: A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added
</p>
</div>
<p>This has done quite a lot to our chart - its given us several new lines for each group, and a legend. If your computer is anything like mine, it might be starting to take a few seconds to render this chart. Let’s just do one more thing before we stop playing with this chart.</p>
</div>
<div id="gg_legend" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Changing legends</h3>
<p>Using the <code>theme()</code> argument (which is subtly different from the <code>theme_classic()</code> command), we can adjust the legend.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="ggplot.html#cb69-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb69-2"><a href="ggplot.html#cb69-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">colour =</span> cut)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb69-3"><a href="ggplot.html#cb69-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb69-4"><a href="ggplot.html#cb69-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb69-5"><a href="ggplot.html#cb69-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb69-6"><a href="ggplot.html#cb69-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb69-7"><a href="ggplot.html#cb69-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb69-8"><a href="ggplot.html#cb69-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>,</span>
<span id="cb69-9"><a href="ggplot.html#cb69-9"></a>        <span class="dt">title =</span> <span class="st">&quot;Price of &gt;50,000 round-cut diamonds&quot;</span>,</span>
<span id="cb69-10"><a href="ggplot.html#cb69-10"></a>        <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2 package&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb69-11"><a href="ggplot.html#cb69-11"></a><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb69-12"><a href="ggplot.html#cb69-12"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-132"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-132-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added" width="672" />
<p class="caption">
Figure: 5.14: A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added
</p>
</div>
<p>But lets say we also want to change the text from ‘cut’ to ‘Cut of Diamond’. Well, you can think of this as another axis we can change. Instead of a <code>scale_x_</code> we can change the <code>scale_colour_</code>. And this isn’t a continuous scale but a discrete (categorical) one, so we change it with <code>scale_colour_discrete</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="ggplot.html#cb70-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb70-2"><a href="ggplot.html#cb70-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">colour =</span> cut)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb70-3"><a href="ggplot.html#cb70-3"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb70-4"><a href="ggplot.html#cb70-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span> (<span class="dv">0</span>, <span class="dv">6</span>, <span class="fl">0.5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">6</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb70-5"><a href="ggplot.html#cb70-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">2500</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="op">+</span></span>
<span id="cb70-6"><a href="ggplot.html#cb70-6"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb70-7"><a href="ggplot.html#cb70-7"></a><span class="st">  </span><span class="kw">labs</span> (<span class="dt">x =</span> <span class="st">&quot;Carat (a measure of diamond weight)&quot;</span>,</span>
<span id="cb70-8"><a href="ggplot.html#cb70-8"></a>        <span class="dt">y =</span> <span class="st">&quot;Price in US dollars ($)&quot;</span>,</span>
<span id="cb70-9"><a href="ggplot.html#cb70-9"></a>        <span class="dt">title =</span> <span class="st">&quot;Price of &gt;50,000 round-cut diamonds&quot;</span>,</span>
<span id="cb70-10"><a href="ggplot.html#cb70-10"></a>        <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2 package&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb70-11"><a href="ggplot.html#cb70-11"></a><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb70-12"><a href="ggplot.html#cb70-12"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></span>
<span id="cb70-13"><a href="ggplot.html#cb70-13"></a><span class="st">  </span><span class="kw">scale_color_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Cut of Diamond&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-133"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-133-1.png" alt="A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added" width="672" />
<p class="caption">
Figure: 5.15: A ggplot object with a geom_point layer, the price of diamonds by their carat and cut, regression line added
</p>
</div>
<p>Note that using <code>scale_color_discrete</code> has changed the way ggplot2 handles the default colour assignments for the factor. This might give you a clue as to where you might want to look to change the colours on purpose . . .</p>
</div>
</div>
<div id="gg_boxplot" class="section level2">
<h2><span class="header-section-number">5.3</span> Building a boxplot</h2>
<p>At this stage, I’m wondering how useful our scatterplot is. Perhaps it would be easier to visualise this with a boxplot. We just need to build a new object.</p>
<p>Lets look to see if there’s a relationship between how big the diamond is (carat) and its clarity (how clear it is).</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ggplot.html#cb71-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb71-2"><a href="ggplot.html#cb71-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> clarity, <span class="dt">y =</span> carat)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb71-3"><a href="ggplot.html#cb71-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-134"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-134-1.png" alt="A ggplot object with a geom_boxplot, the carat of diamonds by their clarity" width="672" />
<p class="caption">
Figure: 5.16: A ggplot object with a geom_boxplot, the carat of diamonds by their clarity
</p>
</div>
<p>And with just a few lines of code, we can create a very different looking chart:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="ggplot.html#cb72-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb72-2"><a href="ggplot.html#cb72-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> clarity, <span class="dt">y =</span> carat, <span class="dt">colour =</span> clarity)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb72-3"><a href="ggplot.html#cb72-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb72-4"><a href="ggplot.html#cb72-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Clarity and carat of &gt;50,000 diamonds&quot;</span>,</span>
<span id="cb72-5"><a href="ggplot.html#cb72-5"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2&quot;</span>,</span>
<span id="cb72-6"><a href="ggplot.html#cb72-6"></a>       <span class="dt">x =</span> <span class="st">&quot;Clarity (clearness) of diamond&quot;</span>,</span>
<span id="cb72-7"><a href="ggplot.html#cb72-7"></a>       <span class="dt">y =</span> <span class="st">&quot;Carat (weight) of diamond&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb72-8"><a href="ggplot.html#cb72-8"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb72-9"><a href="ggplot.html#cb72-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-135"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-135-1.png" alt="A ggplot object with a geom_boxplot, the carat of diamonds by their clarity" width="672" />
<p class="caption">
Figure: 5.17: A ggplot object with a geom_boxplot, the carat of diamonds by their clarity
</p>
</div>
</div>
<div id="gg_facets" class="section level2">
<h2><span class="header-section-number">5.4</span> Facets</h2>
<p>Another very useful command is ‘facet’, which splits one chart into many based on a particular variable.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="ggplot.html#cb73-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb73-2"><a href="ggplot.html#cb73-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> clarity, <span class="dt">y =</span> carat, <span class="dt">colour =</span> clarity)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb73-3"><a href="ggplot.html#cb73-3"></a><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb73-4"><a href="ggplot.html#cb73-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Clarity, cut and carat of &gt;50,000 diamonds&quot;</span>,</span>
<span id="cb73-5"><a href="ggplot.html#cb73-5"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2&quot;</span>,</span>
<span id="cb73-6"><a href="ggplot.html#cb73-6"></a>       <span class="dt">x =</span> <span class="st">&quot;Clarity (clearness) of diamond&quot;</span>,</span>
<span id="cb73-7"><a href="ggplot.html#cb73-7"></a>       <span class="dt">y =</span> <span class="st">&quot;Carat (weight) of diamond&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb73-8"><a href="ggplot.html#cb73-8"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb73-9"><a href="ggplot.html#cb73-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></span>
<span id="cb73-10"><a href="ggplot.html#cb73-10"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-136"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-136-1.png" alt="A ggplot object with a geom_boxplot, the carat of diamonds by their clarity" width="672" />
<p class="caption">
Figure: 5.18: A ggplot object with a geom_boxplot, the carat of diamonds by their clarity
</p>
</div>
</div>
<div id="gg_bars" class="section level2">
<h2><span class="header-section-number">5.5</span> Bar charts</h2>
<p>To create a bar chart, we simply need to change the <code>geom_boxplot()</code> to a <code>geom_bar</code> argument with a <code>stat="summary"</code> specification.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="ggplot.html#cb74-1"></a>diamonds <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb74-2"><a href="ggplot.html#cb74-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> clarity, <span class="dt">y =</span> carat, <span class="dt">fill =</span> clarity)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb74-3"><a href="ggplot.html#cb74-3"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>) <span class="op">+</span></span>
<span id="cb74-4"><a href="ggplot.html#cb74-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Clarity, cut and carat of &gt;50,000 diamonds&quot;</span>,</span>
<span id="cb74-5"><a href="ggplot.html#cb74-5"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Data from ggplot2&quot;</span>,</span>
<span id="cb74-6"><a href="ggplot.html#cb74-6"></a>       <span class="dt">x =</span> <span class="st">&quot;Clarity (clearness) of diamond&quot;</span>,</span>
<span id="cb74-7"><a href="ggplot.html#cb74-7"></a>       <span class="dt">y =</span> <span class="st">&quot;Carat (weight) of diamond&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb74-8"><a href="ggplot.html#cb74-8"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb74-9"><a href="ggplot.html#cb74-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></span>
<span id="cb74-10"><a href="ggplot.html#cb74-10"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-137"></span>
<img src="ratrdsvs_files/figure-html/unnamed-chunk-137-1.png" alt="A ggplot object with a geom_bar, the carat of diamonds by their clarity" width="672" />
<p class="caption">
Figure: 5.19: A ggplot object with a geom_bar, the carat of diamonds by their clarity
</p>
</div>
<p>There are a few notes here.</p>
<ul>
<li><p>Within <code>geom_bar</code> we have set the argument <code>geom_bar(stat = "summary")</code>. This tells R to calculate the mean carat for each group. Note as well that the groups are nested (we are calculating the mean carat for each clarity grouping inside each cut grouping).</p></li>
<li><p><code>geom_bar</code> wants <code>fill = clarity</code> instead of <code>colour = clarity</code>, as it treats <code>colour</code> as the line around the bar. If you’re anything like me you will always forget this and change the colour of the bar plot lines instead of its fill.</p></li>
</ul>
</div>
<div id="ex_ggplot" class="section level2">
<h2><span class="header-section-number">5.6</span> Exercise</h2>
<p>Please feel free to google and explore these questions - as well as putting your own customisation touches.</p>
<p>Create a boxplot of the <code>mpg</code> cars dataset, plotting highway miles (<code>hwy</code>) against the car type (<code>class</code>)
<a href="answers.html#ans_ggbox">Answer here</a></p>
<p>Create a histogram of the number of miles per gallon in the city (<code>cty</code>) faceted by type of transmission (<code>trans</code>)
<a href="answers.html#ans_gghist">Answer here</a></p>
</div>
<div id="gg_vids" class="section level2">
<h2><span class="header-section-number">5.7</span> Videos</h2>
<p>If you’d rather watch a video about this - <a href="https://media.ed.ac.uk/media/R+ConversationsA+Demystifying+ggplot/0_sct50ue1">you can here!</a></p>
</div>
<div id="gg_resources" class="section level2">
<h2><span class="header-section-number">5.8</span> Useful resources</h2>
<p>There are some very useful resources out there about ggplot2 including:</p>
<ul>
<li><p><a href="http://www.cookbook-r.com/Graphs/">Cookbook for R</a>, Winston Chang’s (free) online book about using ggplot</p></li>
<li><p><a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot cheatsheet</a>, a pdf with lots of neat visualisations and cheats.</p></li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="10">
<li id="fn10"><p>You may be interested to know that the <code>+</code> symbol is a precursor to the <code>%&gt;%</code> symbol. Both <code>ggplot2</code> and <code>tidyverse</code> were mainly written by <a href="https://twitter.com/hadleywickham">Hadley Wickham</a> who has spoken about <a href="https://community.rstudio.com/t/why-cant-ggplot2-use/4372/7">why ggplot won’t ever use the %&gt;% operator</a><a href="ggplot.html#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="charts.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataprocessing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"collapse": "subsection"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
